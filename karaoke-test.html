<!DOCTYPE html>
<html>
  <head>
    <title>Karaoke App - Test Version</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .search-container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      input[type="text"] {
        width: 70%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
      }
      button {
        padding: 12px 20px;
        background-color: #ff0000;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        margin-left: 10px;
      }
      button:hover {
        background-color: #cc0000;
      }
      #results {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .song-item {
        display: block;
        width: 100%;
        margin: 10px 0;
        padding: 15px;
        background-color: #f8f9fa;
        border: 1px solid #ddd;
        border-radius: 4px;
        text-align: left;
        transition: background-color 0.2s;
        color: #333;
      }
      .song-item:hover {
        background-color: #e9ecef;
        border-color: #adb5bd;
      }
      #player {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        text-align: center;
      }
      .loading {
        color: #666;
        font-style: italic;
      }
      .error {
        color: #dc3545;
        background-color: #f8d7da;
        padding: 10px;
        border-radius: 4px;
        border: 1px solid #f5c6cb;
      }
    </style>
  </head>
  <body>
    <h1>üé§ My YouTube Videoke App - Test Version</h1>

    <div class="search-container">
      <input
        id="search"
        type="text"
        placeholder="Search for songs (e.g., 'Bohemian Rhapsody', 'Let it Go')"
      />
      <button onclick="searchSongs()">üîç Search</button>
    </div>

    <div id="results"></div>
    <div id="player"></div>

    <script>
      // ‚ö†Ô∏è REPLACE THIS with your actual YouTube API key
      const API_KEY = "AIzaSyDSNV7oQwZHS0JIBkkxkWRsq1skkSG_SR4";

      // Test if API key is set
      if (API_KEY === "YOUR_YOUTUBE_API_KEY_HERE") {
        document.getElementById("results").innerHTML = `
                <div class="error">
                    <strong>‚ö†Ô∏è API Key Required:</strong><br>
                    Please replace YOUR_YOUTUBE_API_KEY_HERE with your actual YouTube Data API key in the code.
                </div>
            `;
      }

      async function searchSongs() {
        const query = document.getElementById("search").value.trim();
        if (!query) {
          alert("Please enter a song to search for!");
          return;
        }

        const resultsDiv = document.getElementById("results");
        resultsDiv.innerHTML =
          '<div class="loading">üîç Searching for karaoke versions...</div>';

        try {
          // Add "karaoke" to search query for better results
          const searchQuery = query + " karaoke";
          const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${encodeURIComponent(
            searchQuery
          )}&maxResults=3&key=${API_KEY}`;

          const response = await fetch(url);
          const data = await response.json();

          if (data.error) {
            throw new Error(data.error.message);
          }

          resultsDiv.innerHTML = "";

          if (data.items && data.items.length > 0) {
            data.items.forEach((item) => {
              const button = document.createElement("button");
              button.className = "song-item";
              button.innerHTML = `
                            <strong>${item.snippet.title}</strong><br>
                            <small>by ${item.snippet.channelTitle}</small>
                        `;
              button.onclick = () =>
                loadVideo(item.id.videoId, item.snippet.title);
              resultsDiv.appendChild(button);
            });
          } else {
            resultsDiv.innerHTML =
              '<div class="error">No karaoke songs found. Try a different search term!</div>';
          }
        } catch (error) {
          console.error("Search error:", error);
          resultsDiv.innerHTML = `
                    <div class="error">
                        <strong>Search failed:</strong> ${error.message}<br>
                        <small>Check your API key and internet connection.</small>
                    </div>
                `;
        }
      }

      function loadVideo(videoId, title) {
        const playerDiv = document.getElementById("player");
        playerDiv.innerHTML = `
                <h3>üéµ Now Playing: ${title}</h3>
                <iframe width="100%" height="315" 
                    src="https://www.youtube.com/embed/${videoId}?autoplay=1&controls=1"
                    frameborder="0" 
                    allow="autoplay; encrypted-media" 
                    allowfullscreen>
                </iframe>
                <p><small>Video will auto-play. Use the YouTube controls to pause/adjust volume.</small></p>
            `;

        // Scroll to player
        playerDiv.scrollIntoView({ behavior: "smooth" });
      }

      // Allow Enter key to search
      document
        .getElementById("search")
        .addEventListener("keypress", function (event) {
          if (event.key === "Enter") {
            searchSongs();
          }
        });
    </script>
  </body>
</html>
